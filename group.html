<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>MeetMate ê·¸ë£¹ ìƒì„±</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="meetmate.css" />
    <script src="meetmate.js"></script>
    <style>
      .content {
        flex: 1;
        padding: 48px;
        margin: 0 auto;
      }
      .content h2 {
        margin-top: 0;
        font-size: 30px;
        font-weight: 600;
        text-align: center;
      }
      .content p {
        font-size: 20px;
        color: #555;
        margin-top: 10px;
      }
      section {
        margin-bottom: 40px;
      }
      input[type="text"] {
        width: 100%;
        padding: 12px;
        margin-top: 8px;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-size: 14px;
      }

      .link-box {
        background-color: #f1f3f5;
        border: 1px solid #ccc;
        padding: 12px;
        border-radius: 6px;
        font-family: monospace;
        margin-top: 10px;
        word-break: break-word;
      }
      ul.member-list {
        list-style: none;
        padding: 0;
        margin-top: 10px;
      }
      ul.member-list li {
        margin-bottom: 6px;
      }
      .member-invite-button {
        margin-top: 8px;
      }

      @media (max-width: 768px) {
        .main-container {
          flex-direction: column;
        }
        .sidebar {
          width: 100%;
          display: flex;
          overflow-x: auto;
          border-bottom: 1px solid #ddd;
        }
        .sidebar ul {
          display: flex;
          width: 100%;
        }
        .sidebar li {
          flex: 1;
          justify-content: center;
          padding: 10px;
          font-size: 13px;
        }
        .content {
          padding: 24px;
        }
      }

      label {
        display: block;
        font-weight: 600;
        font-size: 16px;
        margin-top: 12px;
        margin-bottom: 6px;
      }

      body.dark {
        background-color: #121212;
        color: #e0e0e0;
      }

      body.dark header,
      body.dark .sidebar,
      body.dark .side-panel,
      body.dark .card,
      body.dark .content {
        background-color: #1e1e1e;
        color: #e0e0e0;
      }

      body.dark .link-box {
        background-color: #2c2c2c;
        border-color: #555;
        color: #f0f0f0;
      }

      body.dark input[type="text"] {
        background-color: #3a3a3a;
        border: 1px solid #555;
        color: #f0f0f0;
      }

      body.dark button.primary {
        background-color: #2a2a2a;
        color: #80b0ff;
        border: 1px solid #484848;
      }

      body.dark button.primary:hover {
        background-color: #333;
        color: #a5c9ff;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>
        <a href="main-home.html" style="text-decoration: none; color: inherit"
          >MeetMate</a
        >
      </h1>
      <div class="top-buttons">
        <button onclick="settings()">ì„¤ì •</button>
      </div>
    </header>
    <nav class="topnav">
      <ul>
        <li>
          <a href="program.html"><span>ğŸ§‘â€ğŸ¤â€ğŸ§‘</span>ì—­í•  ë¶„ë‹´</a>
        </li>
        <li class="active">
          <a href="group.html"><span>ğŸ“…</span>ì¼ì • ì¡°ìœ¨</a>
        </li>
        <li>
          <a href="map.html"><span>ğŸ“</span>íšŒì˜ ì¥ì†Œ</a>
        </li>
        <li>
          <a href="file-share.html"><span>ğŸ“</span>ìë£Œ ê³µìœ </a>
        </li>
        <li>
          <a href="group-result.html"><span>ğŸ“‹</span>ì „ì²´ ìš”ì•½</a>
        </li>
      </ul>
    </nav>
    <div class="main-container">
      <div class="content">
        <h2>ê·¸ë£¹ ë§Œë“¤ê¸°</h2>
        <section>
          <label for="owner-input">ë‹‰ë„¤ì„</label>
          <input type="text" id="owner-input" placeholder="ì˜ˆ: í™ê¸¸ë™" />
        </section>
        <section>
          <label for="member-input">ì¡°ì› ì´ˆëŒ€</label>
          <input
            type="text"
            id="member-input"
            placeholder="ë‹‰ë„¤ì„ ë˜ëŠ” ì´ë©”ì¼ ì…ë ¥"
          />
          <button class="primary member-invite-button" onclick="addMember()">
            + ì´ˆëŒ€
          </button>

          <ul class="member-list" id="member-list"></ul>
        </section>
        <section>
          <label>ê³µìœ  ë§í¬</label>
          <button class="primary" onclick="generateLink()">
            ë§í¬ ìƒì„± ë° ë³µì‚¬
          </button>
          <div class="link-box" id="share-link">(ë§í¬ ì—†ìŒ)</div>
        </section>
        <section>
          <button class="primary" onclick="goToSchedule()">
            â¡ï¸ ì‹œê°„ ì„ íƒí•˜ëŸ¬ ê°€ê¸°
          </button>
        </section>
      </div>
      <div class="side-panel">
        <div class="card">
          <div id="today-date">ğŸ“… ì˜¤ëŠ˜ ë‚ ì§œ: ...</div>
          <div id="current-time">ğŸ•’ í˜„ì¬ ì‹œê°„: ...</div>
        </div>
        <div class="card motivation">
          ğŸ©¶ ì˜¤ëŠ˜ë„ ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”!<br />í•¨ê»˜í•˜ëŠ” ì¼ì •ì€ ë” ì†Œì¤‘í•´ìš”.
        </div>
        <div class="card">
          <button
            onclick="toggleDarkMode()"
            class="primary"
            style="width: 100%"
          >
            ğŸŒ™ ë‹¤í¬ëª¨ë“œ
          </button>
        </div>
      </div>
    </div>
    <script>
      const members = [];
      function addMember() {
        const input = document.getElementById("member-input");
        const value = input.value.trim();
        if (!value || members.includes(value)) return;
        members.push(value);
        input.value = "";
        renderMembers();
      }
      function renderMembers() {
        const ul = document.getElementById("member-list");
        ul.innerHTML = members.map((m) => `<li>ğŸ‘¤ ${m}</li>`).join("");
      }
      function generateLink() {
        const owner = document.getElementById("owner-input").value.trim();
        if (!owner) return alert("ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”");
        const code = Math.random().toString(36).substring(2, 8);
        const link = `${location.origin}${location.pathname}?code=${code}`;
        document.getElementById("share-link").textContent = link;
        navigator.clipboard.writeText(link).then(() => {
          alert("ì´ˆëŒ€ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
        });
        localStorage.setItem(
          `group_${code}`,
          JSON.stringify({ owner, members })
        );
      }
      function goToSchedule() {
        const owner = document.getElementById("owner-input").value.trim();
        if (!owner) {
          alert("ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”");
          return;
        }
        const linkText = document.getElementById("share-link").textContent;
        const code = linkText.includes("code=")
          ? linkText.split("code=")[1]
          : null;
        if (!code) {
          alert("ë¨¼ì € ì´ˆëŒ€ ë§í¬ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.");
          return;
        }
        location.href = `group-schedule.html?code=${code}&user=${encodeURIComponent(
          owner
        )}`;
      }
      function goHome() {
        location.href = "program.html";
      }
    </script>
  </body>
</html>
